<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - BlueVelvet Music Store</title>
    <link rel="stylesheet" href="../static/styles.css">
</head>
<body>
<div class="main-content">
<nav class="navbar">
    <div class="logo">
        <img src="images/banana.png" alt="BlueVelvet Music Store" />
    </div>
    <div class="hamburger">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <ul class="nav-links">
        <li><a href="articles.html">Articles</a></li>
        <li><a href="brands.html">Brands</a></li>
        <li><a href="categories.html">Categories</a></li>
        <li><a href="customers.html">Customers</a></li>
        <li><a href="menus.html">Menus</a></li>
        <li><a href="orders.html">Orders</a></li>
        <li><a href="dashboard.html">Products</a></li>
        <li><a href="sales-report.html">Sales Report</a></li>
        <li><a href="settings.html">Settings</a></li>
        <li><a href="shipping.html">Shipping</a></li>
        <li><a href="users.html">Users</a></li>
    </ul>
</nav>
<div class="container">
<h1>Product Details</h1>

<div id="product-details" class="container">
    <div>
        <label>Product ID:</label>
        <span id="product-id">Loading...</span>
    </div>

    <div>
        <label>Product Name:</label>
        <span id="product-name">Loading...</span>
    </div>

    <div>
        <label>Category:</label>
        <span id="category">Loading...</span>
    </div>

    <div>
        <label>Brand:</label>
        <span id="brand">Loading...</span>
    </div>

    <div>
        <label>Main Image:</label>
        <img id="main-image" src="" alt="Product Image" style="width: 100px; height: 100px; display: none;" />
    </div>

    <div>
        <label>Short Description:</label>
        <span id="short-description">Loading...</span>
    </div>

    <div>
        <label>Full Description:</label>
        <p id="full-description">Loading...</p>
    </div>

    <div>
        <label>List Price:</label>
        <span id="list-price">Loading...</span>
    </div>

    <div>
        <label>Discount:</label>
        <span id="discount">Loading...</span>
    </div>

    <div>
        <label>Net Price:</label>
        <span id="net-price">Loading...</span>
    </div>

    <div>
        <label>Enabled:</label>
        <span id="enabled">Loading...</span>
    </div>

    <div>
        <label>In Stock:</label>
        <span id="in-stock">Loading...</span>
    </div>

    <div>
        <label>Creation Time:</label>
        <span id="creation-time">Loading...</span>
    </div>

    <div>
        <label>Update Time:</label>
        <span id="update-time">Loading...</span>
    </div>

    <div>
        <label>Length:</label>
        <span id="length">Loading...</span>
    </div>
    <div>
        <label>Width:</label>
        <span id="width">Loading...</span>
    </div>
    <div>
        <label>Height:</label>
        <span id="height">Loading...</span>
    </div>
    <div>
        <label>Weight:</label>
        <span id="weight">Loading...</span>
    </div>

    <div>
        <label>Product Details:</label>
        <ul id="product-details-list">
            <!-- Dynamic product details list -->
        </ul>
    </div>
</div>

<button onclick="window.history.back()">Back to Dashboard</button>
</div>

<script>
    // Show/hide navigation menu on mobile
    document.addEventListener("DOMContentLoaded", () => {
        const hamburger = document.querySelector(".hamburger");
        const navLinks = document.querySelector(".nav-links");

        hamburger.addEventListener("click", () => {
            navLinks.classList.toggle("show");
        });
    });

    document.addEventListener('DOMContentLoaded', async () => {
        const apiUrl = 'http://localhost:8080/produtos';

        // Get the product ID from the URL
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');

        if (!productId) {
            alert('Error: Product ID is missing in the URL.');
            return;
        }

        try {
            // Fetch product details from the API
            const response = await fetch(`${apiUrl}/${productId}`);
            if (!response.ok) throw new Error('Error fetching product details: ' + response.statusText);

            const product = await response.json();

            // Populate the product details in the HTML
            document.getElementById('product-id').textContent = product.idProduct;
            document.getElementById('product-name').textContent = product.productName;
            document.getElementById('category').textContent = product.category;
            document.getElementById('brand').textContent = product.brand;

            // Populate main image
            const mainImage = document.getElementById('main-image');
            mainImage.src = product.mainImage || 'images/default-product.png';
            mainImage.style.display = 'block';

            // Populate featured images
            const featuredImagesContainer = document.createElement('div');
            featuredImagesContainer.id = 'featured-images';
            document.getElementById('product-details').appendChild(featuredImagesContainer);

            if (product.featuredImages && product.featuredImages.length > 0) {
                product.featuredImages.forEach((imageObj, index) => {
                    const img = document.createElement('img');
                    img.src = imageObj.image || 'images/default-product.png';
                    img.alt = `Featured Image ${index + 1}`;
                    img.style.width = '100px';
                    img.style.height = '100px';
                    img.style.margin = '5px';
                    featuredImagesContainer.appendChild(img);
                });
            } else {
                featuredImagesContainer.textContent = 'No featured images available.';
            }

            document.getElementById('short-description').textContent = product.shortDescription || 'N/A';
            document.getElementById('full-description').textContent = product.fullDescription || 'N/A';
            document.getElementById('list-price').textContent = `$${product.price}`;
            document.getElementById('discount').textContent = `$${product.discount} (${Math.round(((product.discount * 100) / product.price)*100)/100}% OFF)`;
            document.getElementById('net-price').textContent = `$${product.price - product.discount}`;
            document.getElementById('enabled').textContent = product.enabled ? 'Yes' : 'No';
            document.getElementById('in-stock').textContent = product.inStock ? 'Yes' : 'No';

            // Dimensions
            document.getElementById('length').textContent = `${product.dimensions.length || 'N/A'} ${product.dimensions.unit || ''}`;
            document.getElementById('width').textContent = `${product.dimensions.width || 'N/A'} ${product.dimensions.unit || ''}`;
            document.getElementById('height').textContent = `${product.dimensions.height || 'N/A'} ${product.dimensions.unit || ''}`;
            document.getElementById('weight').textContent = `${product.dimensions.weight || 'N/A'} ${product.dimensions.unitWeight || ''}`;

            // Additional details
            const detailsList = document.getElementById('product-details-list');
            if (product.details && product.details.length > 0) {
                product.details.forEach(detail => {
                    const listItem = document.createElement('li');
                    listItem.textContent = `${detail.name}: ${detail.value}`;
                    detailsList.appendChild(listItem);
                });
            } else {
                detailsList.innerHTML = '<li>No additional details available.</li>';
            }
        } catch (error) {
            console.error(error);
            alert('Error loading product details. Please try again later.');
        }
    });


</script>
</div>
<div id="footer-container"></div>
<script>
    // Carrega o conteÃºdo do footer.html no div com ID "footer-container"
    document.addEventListener('DOMContentLoaded', () => {
        fetch('footer.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('footer-container').innerHTML = html;
            })
            .catch(error => console.error('Erro ao carregar o footer:', error));
    });
</script>
</body>
</html>
